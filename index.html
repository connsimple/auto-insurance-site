<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Conn Simple — Connecticut Auto Insurance</title>

  <style>
    /* ===== Base ===== */
    :root{
      --brand:#004aad;    /* UConn-style navy */
      --brand-2:#c8102e;  /* accent red (subtle) */
      --text:#1f2937;
      --muted:#6b7280;
      --bg:#ffffff;
      --light:#f3f4f6;
      --card:#ffffff;
      --ring:rgba(0,74,173,.18);
      --shadow:0 10px 30px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text); background:var(--bg); line-height:1.55;
      overflow-x:hidden;
    }
    a{color:inherit; text-decoration:none}
    img{max-width:100%; display:block}

    /* ===== Header ===== */
    header{
      position:sticky; top:0; z-index:1000; background:#fff; box-shadow:0 1px 0 #e5e7eb;
    }
    .nav{
      max-width:1200px; margin:0 auto; padding:14px 18px;
      display:flex; align-items:center; justify-content:space-between; gap:14px;
    }
    .brand{display:flex; align-items:center; gap:10px; font-weight:700; font-size:1.1rem; color:var(--brand)}
    .brand img{width:36px; height:36px; object-fit:contain}
    .links{display:flex; gap:18px}
    .links a{padding:8px 10px; border-radius:8px; color:#374151; font-weight:600}
    .links a.active, .links a:hover{color:var(--brand); background:rgba(0,74,173,.06)}

    /* ===== Hero ===== */
    .hero{
      position:relative; display:grid; place-items:center; text-align:center;
      padding:72px 18px; background:
        linear-gradient( to bottom, rgba(0,0,0,.45), rgba(0,0,0,.45) ),
        url('https://images.unsplash.com/photo-1503376780353-7e6692767b70?q=80&w=1600&auto=format&fit=crop') center/cover no-repeat;
      color:#fff;
      min-height:66vh;
    }
    .hero h1{font-size:clamp(28px,5vw,44px); margin:0 0 8px}
    .hero p{margin:0 0 18px; color:#e5e7eb; font-size:clamp(16px,2.5vw,18px)}
    .btn{
      display:inline-block; background:var(--brand); color:#fff; border:none;
      padding:12px 22px; border-radius:10px; font-weight:700; cursor:pointer;
      box-shadow:var(--shadow);
    }
    .btn:hover{filter:brightness(.95)}
    .btn.alt{background:#fff; color:var(--brand)}

    /* ===== Sections ===== */
    section{padding:56px 18px}
    .wrap{max-width:1200px; margin:0 auto}
    .tiles{display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:16px}
    .tile{background:var(--card); border:1px solid #e5e7eb; border-radius:14px; padding:18px; box-shadow:var(--shadow)}
    h2{font-size:28px; margin:0 0 14px; color:var(--brand)}

    /* ===== Quote Card ===== */
    .quote-card{
      display:grid; gap:16px; grid-template-columns:1.1fr .9fr;
      background:#fff; border:1px solid #e5e7eb; border-radius:16px; padding:20px; box-shadow:var(--shadow);
    }
    @media(max-width:900px){ .quote-card{grid-template-columns:1fr} }
    form#quoteForm{
      display:grid; gap:12px;
    }
    .row{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    @media(max-width:600px){ .row{grid-template-columns:1fr} }
    input, select, textarea{
      width:100%; padding:12px 14px; border:1px solid #d1d5db; border-radius:10px; font-size:16px;
      outline:none; transition:border-color .2s, box-shadow .2s; background:#fff;
    }
    input:focus, select:focus, textarea:focus{border-color:var(--brand); box-shadow:0 0 0 4px var(--ring)}
    label{font-weight:700; font-size:14px; color:#374151}
    .muted{color:var(--muted); font-size:14px}

    .result{
      border:1px solid #e5e7eb; border-radius:12px; padding:16px; background:var(--light);
      display:none;
    }
    .result h3{margin:0 0 10px}
    .price{font-size:22px; font-weight:800; color:var(--brand)}
    .kicker{font-weight:700; color:#065f46}
    .stack{display:grid; gap:10px}

    /* ===== Footer ===== */
    footer{background:#0b1220; color:#cbd5e1; text-align:center; padding:28px}
  </style>

  <!-- PayPal SDK (replace YOUR_PAYPAL_CLIENT_ID) -->
  <script src="https://www.paypal.com/sdk/js?client-id=YOUR_PAYPAL_CLIENT_ID&currency=USD"></script>
</head>
<body>
  <header>
    <div class="nav">
      <a class="brand" href="#home">
        <!-- If you uploaded logo.png, it will show; otherwise text still works -->
        <img src="logo.png" alt="Conn Simple logo" onerror="this.style.display='none'">
        <span>CONN SIMPLE</span>
      </a>
      <nav class="links">
        <a href="#home" class="active">Home</a>
        <a href="#features">Features</a>
        <a href="#quote">Quote</a>
      </nav>
    </div>
  </header>

  <!-- HERO -->
  <section id="home" class="hero">
    <div class="wrap">
      <h1>Connecticut Auto Insurance, Made Simple</h1>
      <p>Fast quotes. Clear prices. 25% OFF when you choose a yearly plan.</p>
      <a class="btn alt" href="#quote">Start Quote</a>
    </div>
  </section>

  <!-- FEATURES -->
  <section id="features">
    <div class="wrap">
      <h2>Why Conn Simple?</h2>
      <div class="tiles">
        <div class="tile"><h3>Fast Quotes</h3><p>See your price in under 2 minutes.</p></div>
        <div class="tile"><h3>Custom Coverage</h3><p>Basic, Standard, or Full — your call.</p></div>
        <div class="tile"><h3>Local & Trusted</h3><p>Bridgeport, CT • NAIC #47082</p></div>
      </div>
    </div>
  </section>

    <!-- QUOTE -->
  <section id="quote">
    <div class="wrap">
      <h2>Start Your Quote</h2>
      <div class="quote-card">
        <!-- Left: Form -->
        <form id="quoteForm" autocomplete="on">
          <div class="row">
            <div>
              <label for="name">Full Name</label>
              <input id="name" type="text" placeholder="Jane Doe" required />
            </div>
            <div>
              <label for="email">Email</label>
              <input id="email" type="email" placeholder="jane@email.com" required />
            </div>
          </div>

          <div class="row">
            <div>
              <label for="state">State</label>
              <input id="state" type="text" placeholder="CT" required />
            </div>
            <div>
              <label for="term">Term</label>
              <select id="term" required>
                <option value="">Select term…</option>
                <option value="6">6 Months</option>
                <option value="12">12 Months (25% OFF)</option>
              </select>
            </div>
          </div>

          <div class="row">
            <div>
              <label for="plan">Coverage</label>
              <select id="plan" required>
                <option value="">Select coverage…</option>
                <option value="basic">Basic — $90/mo</option>
                <option value="standard">Standard — $130/mo</option>
                <option value="full">Full — $175/mo</option>
              </select>
            </div>
            <div>
              <label>&nbsp;</label>
              <button type="submit" class="btn" style="width:100%">Get Quote</button>
            </div>
          </div>

          <p class="muted">No payment now — see your price first. ID cards & binder are emailed after payment.</p>
        </form>

        <!-- Right: Result + PayPal -->
        <div class="stack">
          <div id="quoteResult" class="result">
            <h3 id="quoteTitle">Your Quote</h3>
            <p id="quoteLines" class="muted"></p>
            <p class="price" id="quotePrice"></p>
            <div id="paypal-button-container" style="margin-top:12px;"></div>
          </div>

          <div class="tile">
            <h3>What’s Included</h3>
            <ul style="margin:8px 0 0 18px; line-height:1.7">
              <li>Instant digital binder (PDF)</li>
              <li>Insurance ID card (PDF)</li>
              <li>24/7 customer support</li>
              <li>Secure online checkout</li>
            </ul>
          </div>
        </div>
      </div>
      <p class="muted" style="margin-top:10px">Conn Simple Auto Insurance • 560 State St, Bridgeport, CT 06605 • 1-888-420-2025 • NAIC #47082</p>
    </div>
  </section>

  <footer>
    <div class="wrap">© 2025 Conn Simple Insurance. Connecticut Auto Insurance.</div>
  </footer>

  <script>
    /* ===== Active link highlight on scroll ===== */
    const sections = document.querySelectorAll("section");
    const navLinks = document.querySelectorAll(".links a");
    window.addEventListener("scroll", () => {
      let current = "home";
      sections.forEach(s=>{
        const top = s.offsetTop - 80;
        if (window.scrollY >= top) current = s.id;
      });
      navLinks.forEach(a=>{
        a.classList.toggle("active", a.getAttribute("href")==="#"+current);
      });
    });

    /* ===== Quote + PayPal wiring ===== */
    const PRICES = { basic: 90, standard: 130, full: 175 }; // per month
    let lastQuote = null;

    function formatUSD(n){ return "$" + Number(n).toFixed(2); }

    document.getElementById("quoteForm").addEventListener("submit", function(e){
      e.preventDefault();

      const name  = document.getElementById("name").value.trim();
      const email = document.getElementById("email").value.trim();
      const state = document.getElementById("state").value.trim();
      const plan  = document.getElementById("plan").value;
      const term  = parseInt(document.getElementById("term").value, 10);

      if(!name || !email || !state || !plan || !term){ return; }

      const monthly = PRICES[plan];
      let total = monthly * term;
      if(term === 12){ total *= 0.75; } // 25% OFF yearly

      const planLabel = plan[0].toUpperCase()+plan.slice(1);

      lastQuote = { name, email, state, plan, planLabel, term, monthly, total };

      // Show result
      const box = document.getElementById("quoteResult");
      document.getElementById("quoteTitle").textContent = `Quote for ${name}`;
      document.getElementById("quoteLines").innerHTML =
        `${planLabel} plan • ${term} months<br>Monthly: ${formatUSD(monthly)}`;
      document.getElementById("quotePrice").textContent = `Total Due: ${formatUSD(total)}`;
      box.style.display = "block";

      // Render/refresh PayPal button each time there is a new quote
      const container = document.getElementById("paypal-button-container");
      container.innerHTML = ""; // reset

      if (typeof paypal !== "undefined") {
        paypal.Buttons({
          style:{ shape:"rect", layout:"vertical", label:"paypal", tagline:false },
          createOrder: function(data, actions) {
            return actions.order.create({
              purchase_units: [{
                description: `${planLabel} Plan (${term} months) — Conn Simple`,
                amount: { currency_code:"USD", value: lastQuote.total.toFixed(2) }
              }]
            });
          },
          onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
              // Notify Netlify function to email PDFs
              fetch("/.netlify/functions/sendPolicyEmail", {
                method:"POST",
                headers:{ "Content-Type":"application/json" },
                body: JSON.stringify({
                  name:lastQuote.name,
                  email:lastQuote.email,
                  state:lastQuote.state,
                  plan:lastQuote.planLabel,
                  term:lastQuote.term,
                  total:lastQuote.total.toFixed(2),
                  transactionId: details.id
                })
              }).catch(()=>{ /* ignore */ });

              alert("Payment successful! Your binder & ID card will be emailed shortly.");
            });
          },
          onError: function(err){
            console.error(err);
            alert("Payment error. Please try again.");
          }
        }).render("#paypal-button-container");
      } else {
        alert("PayPal failed to load. Please refresh and try again.");
      }
    });
  </script>
</body>
</html>
